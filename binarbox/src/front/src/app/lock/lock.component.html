<section class="background-container flex flex--center-center bg-img bg-overlay"
         style="background-image: url(../../../assets/images/background-img-big.jpg);">
    <div class="container container-fit-screen h-100">
        <div class="row flex flex--center-center h-100">
            <!-- Choose category area -->
            <div *ngIf="!lockType" class="scrollable-container container-fluid flex flex--vertical-center">
                <div class="row section-info">
                    <div class="col-12">
                        <div class="section-heading dark text-center">
                            <h4>Choose a lock category</h4>
                            <p>Make the perfect gift for your anniversary. Add a lock on Pont des Arts</p>
                        </div>
                    </div>
                </div>
                <div class="row slides-container features-slides owl-carousel">
                    <!-- Single Features Area -->
                    <div (click)="chooseCategory(lockCategory)"
                         *ngFor="let lockCategory of lockCategories"
                         class="slide-container col-xs-12 col-sm-4 col-md-4">
                        <div class="single-features-area">
                            <img [src]="lockCategory.fileDTO.urlToFile" alt="">
                            <div class="feature-content d-flex align-items-center justify-content-between">
                                <div class="feature-title w-100">
                                    <h5 class="elliptic-text" #ellipticText (resized)="isEllipsisActive(ellipticText)">
                                        <span placement="top" ngbTooltip="{{lockCategory.category}}" *ngIf="isEllipticText">
                                            {{lockCategory.category}}
                                        </span>

                                        <span *ngIf="!isEllipticText">{{lockCategory.category}}</span>
                                    </h5>
                                    <p>{{lockCategory.price | currency}}</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Choose lock area -->
            <div *ngIf="lockType && !lockId" class="container-fluid lock-slider">
                <div class="row headline">
                    <div class="col-12">
                        <div class="section-heading dark text-center">
                            <h4>Now, choose your lock</h4>
                            <p>Check out those models</p>
                        </div>
                    </div>
                </div>
                <div class="row slider-content">
                    <div class="carousel slide" data-ride="carousel" id="carouselExampleIndicators">
                        <ol class="carousel-indicators">
                            <li class="active" data-slide-to="0" data-target="#carouselExampleIndicators"></li>
                            <li data-slide-to="1" data-target="#carouselExampleIndicators"></li>
                            <li data-slide-to="2" data-target="#carouselExampleIndicators"></li>
                        </ol>
                        <div class="carousel-inner">
                            <div (click)="chooseLock(lock)" *ngFor="let lock of locks; let i = index"
                                 [ngClass]="{'active' : !i}" class="carousel-item">
                                <img [src]="lock.filesDTO[0].urlToFile" alt="First slide">
                            </div>
                        </div>
                        <a class="carousel-control-prev" data-slide="prev" href="#carouselExampleIndicators"
                           role="button">
                            <span aria-hidden="true" class="carousel-control-prev-icon"></span>
                            <span class="sr-only">Previous</span>
                        </a>
                        <a class="carousel-control-next" data-slide="next" href="#carouselExampleIndicators"
                           role="button">
                            <span aria-hidden="true" class="carousel-control-next-icon"></span>
                            <span class="sr-only">Next</span>
                        </a>
                    </div>
                </div>
                <div class="row slider-navigation">
                    <div class="col-12">
                        <button (click)="goBack('lockType')" class="btn btn-outline-primary button-outline">
                            Back
                        </button>
                    </div>
                </div>
            </div>

            <!-- Customize lock area -->
            <ng-container *ngIf="lockType && lockId">
                <div class="lock-container" *ngIf="selectedLock['filesDTO']">
                    <form #lockForm="ngForm" (ngSubmit)="saveLock(lockForm.value)">
                        <div class="textareaContainer">
                            <img [src]="selectedLock.filesDTO[0].urlToFile" alt="">
                            <div class="controls">
                                <span class="text--align-center">Type your loving message</span>

                                <textarea
                                    [ngModel]="selectedMessage"
                                    [value]="selectedMessage"
                                    class="form-control"
                                    cols="3"
                                    id="customMessageInput"
                                    maxlength="30"
                                    name="insertMessage"
                                    placeholder="Send your love!"
                                    required
                                    rows="2"
                                    scroll="disable"
                                    type="textarea"
                                    wrap="hard">{{selectedMessage}}
                                </textarea>

                                <div class="form-group">
                                    <div class="col-12 flex flex--center-center">
                                        <label class="custom-control custom-checkbox mb-3">
                                            <input [(ngModel)]="lockPrivacy" class="custom-control-input" name="privacy"
                                                   type="checkbox" value="private">
                                            <span class="custom-control-indicator"></span>
                                            <span class="custom-control-description">Private</span>
                                        </label>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="actions-wrapper">
                            <button (click)="goBack('lockId')" class="btn btn-outline-primary button-outline">
                                Back
                            </button>
                            <button [disabled]="!lockForm.valid" class="btn btn-outline-primary button-outline"
                                    type="submit">Add lock
                            </button>
                        </div>
                    </form>
                </div>
            </ng-container>
        </div>
    </div>
</section>
